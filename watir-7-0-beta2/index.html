<!DOCTYPE html>
<html>
  <head>
    <title>Watir 7.0 Beta 2 – Watir Project</title>

    <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Watir stands for Web Application Testing In Ruby. It facilitates the writing of automated tests by mimicking the behavior of a user interacting with a website.
">
    <meta property="og:description" content="Watir stands for Web Application Testing In Ruby. It facilitates the writing of automated tests by mimicking the behavior of a user interacting with a website.
" />
    

    
    <meta name="author" content="Watir Project" />
    

    
    <meta property="og:title" content="Watir 7.0 Beta 2" />
    <meta property="twitter:title" content="Watir 7.0 Beta 2" />
    

<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Muli:400,400i,700,700i" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/assets/style.css" />
<link rel="alternate" type="application/rss+xml" title="Watir Project - Watir stands for Web Application Testing In Ruby. It facilitates the writing of automated tests by mimicking the behavior of a user interacting with a website.
" href="/feed.xml" />

<!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>
  <body>
    <header><div class = 'header'>
  <div class = 'logo'>
    <a href = '/'>
      <img src = 'https://raw.githubusercontent.com/watir/watir_logo/master/Logo/Watir_logo.png'/>
    </a>
    <span  class = 'hide-on-mobiles tag-line'>Powered by Selenium</span>
    <span class = 'nav__toggle'><i class="fas fa-bars"></i></span>
  </div>
  <nav class = 'nav'><a href = '/blog/'
      
      >
      News
    </a><a href = '/guides/'
      
      >
      Guides
    </a><a href = '/nerodia/'
      
      >
      Nerodia
    </a><a href = '/help/'
      
      >
      Help
    </a><a href = '/about/'
      
      >
      About
    </a><div class = 'custom_search'><script>
  (function() {
    var cx = '014642898046425907042:wbdfsycyxqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search></div>
  </nav>
</div></header><main id = 'main' role = 'main' class = 'container'>
      <article>
  <h3>
    <a href = ''>
      Watir 7.0 Beta 2
    </a>
  </h3>
  <p class = 'blog__meta'>
    
      Written by: <a href = 'https://titusfortner.com/' target = '_blank' rel = 'noopener'> Titus Fortner</a>
    
    on March 26, 2021
  </p>
  <div class = 'post-content'>
    <p>
    <p>Watir 7.0.0.beta2 is now available on RubyGems. This is all the additions and optimizations that were dependent on 
removing the deprecated code in Beta 1. Watir Repo now has zero outstanding bugs! The Issues list contains 2 optimizations
and 2 feature requests which we may or may not get to before Watir 7.0 is released. Expect production release of 
Watir 7.0 as soon as Selenium 4.0 is released.
<!--more--></p>

<p><strong><em>To install:</em></strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gem</span> <span class="n">install</span> <span class="n">watir</span> <span class="o">--</span><span class="n">pre</span></code></pre></figure>

<p><strong><em>or in your Gemfile:</em></strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gem</span> <span class="s2">"watir"</span><span class="p">,</span> <span class="s2">"&gt;= 7.0.0.beta2"</span></code></pre></figure>

<h3 id="setting-values-on-a-page">Setting Values on a Page</h3>

<p>One of the coolest features implemented by Page Object gems is the ability to use Watir to automatically
fill out a form based on Element type. This is an example of what it looks like with Watir 6 <br />
<a href="https://github.com/titusfortner/watir_drops/">in WatirDrops</a>:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="k">case</span> <span class="n">watir_element</span>
  <span class="k">when</span> <span class="no">Watir</span><span class="o">::</span><span class="no">Radio</span>
    <span class="n">watir_element</span><span class="p">.</span><span class="nf">set</span> <span class="k">if</span> <span class="n">val</span>
  <span class="k">when</span> <span class="no">Watir</span><span class="o">::</span><span class="no">CheckBox</span>
    <span class="n">val</span> <span class="p">?</span> <span class="n">watir_element</span><span class="p">.</span><span class="nf">set</span> <span class="p">:</span> <span class="n">watir_element</span><span class="p">.</span><span class="nf">clear</span>
  <span class="k">when</span> <span class="no">Watir</span><span class="o">::</span><span class="no">Select</span>
    <span class="n">watir_element</span><span class="p">.</span><span class="nf">select</span> <span class="n">val</span>
  <span class="k">when</span> <span class="no">Watir</span><span class="o">::</span><span class="no">Button</span>
    <span class="n">watir_element</span><span class="p">.</span><span class="nf">click</span>
  <span class="k">when</span> <span class="no">Watir</span><span class="o">::</span><span class="no">TextField</span><span class="p">,</span> <span class="no">Watir</span><span class="o">::</span><span class="no">TextArea</span>
    <span class="n">watir_element</span><span class="p">.</span><span class="nf">set</span> <span class="n">val</span> <span class="k">if</span> <span class="n">val</span>
  <span class="k">else</span>
    <span class="n">watir_element</span><span class="p">.</span><span class="nf">click</span> <span class="k">if</span> <span class="n">val</span>
  <span class="k">end</span></code></pre></figure>

<p>Some take <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>, some take <code class="highlighter-rouge">String</code> or <code class="highlighter-rouge">Regexp</code> or even <code class="highlighter-rouge">Array</code>.</p>

<p>It makes more sense for Watir to create a standard interface for this interaction than to 
require Page Object gems to implement it. The <code class="highlighter-rouge">#set</code> method was originally intended for this role, 
but determining how the arguments would be used was never fully implemented.</p>

<p>This release simplifies all of that by baking it into <code class="highlighter-rouge">#set</code>. 
The above code can now be implemented with:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="n">watir_element</span><span class="p">.</span><span class="nf">set</span> <span class="n">val</span></code></pre></figure>

<p>Even more interesting, there is a generic <code class="highlighter-rouge">Element#set</code> method. You don’t even have to specify
the element subclass any more. If you have a generic <code class="highlighter-rouge">Watir::Element</code> that matches 
<code class="highlighter-rouge">&lt;input type="checkbox" id="checky" /&gt;</code>, calling <code class="highlighter-rouge">#set</code> on it with <code class="highlighter-rouge">true</code> value, will now automatically
determine that it is actually a <code class="highlighter-rouge">CheckBox</code> element and will ensure that it is selected (based on the <code class="highlighter-rouge">true</code> input).
Obviously, it is better and more efficient for the user to set it, but it is no longer required.</p>

<h3 id="more-select-lists">More Select Lists</h3>

<p>Watir 6 had two methods for selecting options. <code class="highlighter-rouge">Select#select</code> would select
options based on text or label and <code class="highlighter-rouge">Select#select_value</code> would select options based on value.
The code was also a little messy because we assumed everything might be a multiple select list, which
impacted performance a bit.</p>

<p>The first fix was to combine selecting by text, label and value into the <code class="highlighter-rouge">#select</code> method.
This allows us to have the single common interface aliased to <code class="highlighter-rouge">#set</code> (as described in previous section), 
and the likelihood of the value of one option matching the text of another option is relatively small,
but more on this below.</p>

<p>To deal with multiple select lists, we first decided to have people 
use the short-lived <code class="highlighter-rouge">Select#select_all</code> method. Except this moved us 
away from the single common interface for all inputs that we want. Independently,
we decided to support passing in an <code class="highlighter-rouge">Array</code> instance to <code class="highlighter-rouge">#select</code> as a way to indicate
that multiple values should be selected, and it just made sense to remove <code class="highlighter-rouge">#select_all</code> in favor of
toggling multiple select list behavior based on whether the argument received is an <code class="highlighter-rouge">Array</code>.
So if you have a multiple select list and want to match multiple options with one command, put it in an <code class="highlighter-rouge">Array</code>.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">browser</span><span class="p">.</span><span class="nf">goto</span> <span class="s1">'watir.com/examples/simple_form.html'</span>

<span class="n">country_dropdown</span> <span class="o">=</span> <span class="n">browser</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">id: </span><span class="s1">'languages'</span><span class="p">)</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">select</span> <span class="p">[</span><span class="sr">/an/</span><span class="p">]</span> <span class="c1"># An Array, so only first matching selected</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">selected?</span><span class="p">(</span><span class="s1">'1'</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">selected?</span><span class="p">(</span><span class="s1">'3'</span><span class="p">)</span> <span class="c1"># =&gt; true</span></code></pre></figure>

<p>If there is an issue with the value being passed in matching on a value or a text item that you did not
intend, you can now be explicit about what gets matched.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">browser</span><span class="p">.</span><span class="nf">goto</span> <span class="s1">'watir.com/examples/simple_form.html'</span>

<span class="n">country_dropdown</span> <span class="o">=</span> <span class="n">browser</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">id: </span><span class="s1">'country'</span><span class="p">)</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">text: </span><span class="s1">'Denmark'</span><span class="p">)</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">selected?</span><span class="p">(</span><span class="s1">'1'</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">value: </span><span class="s1">'2'</span><span class="p">)</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">selected?</span><span class="p">(</span><span class="s1">'Norway'</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">label: </span><span class="s1">'Sverige'</span><span class="p">)</span>
<span class="n">country_dropdown</span><span class="p">.</span><span class="nf">selected?</span><span class="p">(</span><span class="s1">'Sweden'</span><span class="p">)</span> <span class="c1"># =&gt; true</span></code></pre></figure>

<p>Finally, we added the ability to check if an option is selected in the same manner that
we are selecting it, so now <code class="highlighter-rouge">:value</code> is supported in addition to <code class="highlighter-rouge">:text</code> and <code class="highlighter-rouge">:label</code></p>

<p>For everything about working with Select Lists, read our <a href="/guides/dropdowns">Dropdown Elements Guide</a></p>

<h3 id="selenium-support-classes">Selenium Support Classes</h3>

<p>Alex implemented two non-automation-specific features for Selenium (Logger and Guards) that are being used by Watir.
Maybe these will eventually be put into their own gems.</p>

<p>In Watir 6.6 we pretty much just copy/pasted the Logger implementation from Selenium and then
added things to it. The Selenium Logger was updated in v4 to include all of the Watir functionality,
and allows other projects to extend it.</p>

<p><code class="highlighter-rouge">WatirSpec::Guards</code> has been a part of the WatirSpec project from the beginning (when Jari created them
in 2009), and was based on code in rubyspec. 
They are very powerful and allow executing or not executing pretty much any
block of code in the specs. Unfortunately, it was extremely challenging to keep the watirspecs updated 
as bugs were fixed and w3c capabilities were implemented by different browsers. Selenium Guards
are tied into RSpec metadata. Rather than running or not running blocks of code, each spec has a single
set of guards. The killer feature is that guarded code will execute as pending, so if the bug has been
fixed the test will fail and we can update everything accordingly.</p>

<p>See the <a href="https://github.com/watir/watir/blob/main/CHANGES.md">Changelog</a> 
for the complete history of updates.</p>

    </p>
  </div>
  <div class = 'mb-2'>   
    <h4>Tags:</h4>
    <div class = 'mb-2 mt-2'><a href = '/tag/releases/' class = 'more more--round'>Releases</a></div>
  </div>
  <div>
    
    <a href = 'https://twitter.com/watir_team/status/1376544830675943429'>Thoughts about this article? Let us know!</a>
    
  </div>
</article>

    </main>
    <footer class = 'footer'>
<div class = 'container footer__inner'>
    
  <a href = 'https://github.com/watir' class = 'footer__link'><i class = 'fab fa-github' target = '_blank' rel = 'noopener'></i></a>

  <a href = 'https://www.twitter.com/watir_team' class = 'footer__link'><i class = 'fab fa-twitter' target = '_blank' rel = 'noopener'></i></a>

  <a href = 'http://stackoverflow.com/tags/watir' class = 'footer__link'><i class = 'fab fa-stack-overflow' target = '_blank' rel = 'noopener'></i></a>

    <p><i class="far fa-copyright"></i> <span id = 'year'></span> Watir</p>
</div></footer>
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-75293890-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/watir-7-0-beta2/',
		  'title': 'Watir 7.0 Beta 2'
		});
	</script>
	<!-- End Google Analytics -->

<script src = '/assets/index.js'></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script></body>
</html>
